<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:100,400,700" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>FOOD8</title>

    <style>
        .tekst_indhold {
            padding-bottom: 20px;
            text-align: center;
            font-weight: 400;
            margin: 0 auto;
            width: 75%;
            clear: both;
        }

    </style>

</head>

<body>
    <div id="baggrund_slider">
        <nav id="navigation" data-navigation></nav>

        <h2 class="tekst_indhold">
            Food8 er en restaurationsgruppe af individuelle restauratører der har slået sig sammen. Her kan man gå på opdagelse blandt kendte og ukendte restauranter, madbutikker og barer – eller det, som vi ganske enkelt kalder steder.
        </h2>
        <!--<div class="crossfade">
        <figure></figure>
        <figure></figure>
        <figure></figure>
        <figure></figure>
        <figure></figure>
    </div>-->

        <div id="map"></div>

        <script>
            let restauranter;
            let map;

            function initMap() {
                var centrum = {
                    lat: 55.690071,
                    lng: 12.539130
                };
                map = new google.maps.Map(document.querySelector('#map'), {
                    zoom: 10,
                    center: centrum
                });

                hentWpData();
            }



            async function hentWpData() {
                let wpData = await fetch("http://anjaholstnielsen.dk/kea/2sem/tema7/food8/wordpress/wp-json/wp/v2/restauranter");

                //vis objekt som Json
                restauranter = await wpData.json();
                visRestauranter();
            }


            function visRestauranter() {

                let geocoder = new google.maps.Geocoder();
                restauranter.forEach(restaurant => {

                    address = restaurant.acf.adresse;
                    let navn = restaurant.acf.adresse;
                    console.log(address);
                    geocoder.geocode({
                        'address': address
                    }, function(results, status) {
                        if (status === 'OK') {
                            //resultsMap.setCenter(results[0].geometry.location);
                            var marker = new google.maps.Marker({
                                map: map,
                                position: results[0].geometry.location,
                                title: navn
                            });
                        } else {
                            alert('Geocode was not successful for the following reason: ' + status);
                        }
                    });
                });
            }

        </script>



        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOBMNsAjO4xPnmez3zADKyMOQICUN3a_M&callback=initMap">


        </script>

        <footer id="footer" data-footer></footer>
    </div>

    <script>
        //HENT HEADER
        async function hentMenu() {
            let topMenu = await fetch("navigation.html");
            let menu = await topMenu.text();

            document.querySelector("[data-navigation]").innerHTML = menu;
        }

        //hent indhold når siden er loaded 
        document.addEventListener("DOMContentLoaded", hentMenu);


        //HENT FOOTER
        async function hentFooter() {
            let footer = await fetch("footer.html");
            let footerIndhold = await footer.text();

            document.querySelector("[data-footer]").innerHTML = footerIndhold;
        }

        //hent indhold når siden er loaded 
        document.addEventListener("DOMContentLoaded", hentFooter);

    </script>

</body>

</html>
